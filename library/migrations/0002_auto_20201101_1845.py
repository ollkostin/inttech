# Generated by Django 3.1.2 on 2020-11-01 18:45

from django.db import migrations


class Migration(migrations.Migration):
    dependencies = [
        ('library', '0001_initial'),
    ]

    def insert_data(self, schema_editor):
        Author = self.get_model("library", "Author")
        Book = self.get_model("library", "Book")
        Genre = self.get_model("library", "Genre")

        fantastic = Genre(name='Фантастика')
        science = Genre(name='Наука')
        adventure = Genre(name='Приключения')
        dystopia = Genre(name='Антиутопия')

        genres = [
            fantastic,
            science,
            adventure,
            dystopia
        ]

        for g in genres:
            g.save()

        vern = Author(name="Ж.Верн")
        tit = Author(name="Т.Тит")
        pulman = Author(name="Ф.Пулман")
        dini = Author(name="П.Дини")
        orwell = Author(name="Д.Оруэлл")
        zamyatin = Author(name="Е.Замятин")
        bradburry = Author(name="Р.Бредберри")

        authors = [
            vern,
            tit,
            pulman,
            dini,
            orwell,
            zamyatin,
            bradburry
        ]

        for author in authors:
            author.save()

        books = [
            Book(name='2000 лье под водой', genre=fantastic, author=vern),
            Book(name='Вокруг света за 80 дней', genre=adventure, author=vern),
            Book(name='Путешествие к центру земли', genre=fantastic, author=vern),

            Book(name='Научные забавы. Физические эксперименты', genre=science, author=tit),

            Book(name='Золотой компас', genre=adventure, author=pulman),
            Book(name='Однажды на севере', genre=adventure, author=pulman),
            Book(name='Северное сияние', genre=fantastic, author=pulman),

            Book(name='Черная канарейка и Затанна', genre=fantastic, author=dini),
            Book(name='Бэтмен: Безумная любовь и другие истории', genre=adventure, author=dini),

            Book(name='1984', genre=dystopia, author=orwell),
            Book(name='Скотный двор', genre=dystopia, author=orwell),

            Book(name='Мы', genre=dystopia, author=zamyatin),

            Book(name='451 по Фаренгейту', genre=dystopia, author=bradburry),
            Book(name='Марсианские хроники', genre=fantastic, author=bradburry),
        ]
        for book in books:
            book.save()

    operations = [
        migrations.RunPython(insert_data)
    ]
